<h2>Create Questionnaire</h2>

<form [formGroup]="qForm" (ngSubmit)="save()">
  <label>Title:</label>
  <input formControlName="title" />

  <div formArrayName="questions">
    <div *ngFor="let q of questions.controls; let i = index" [formGroupName]="i">
      <h3>Question {{ i + 1 }}</h3>

      <label>Text:</label>
      <input formControlName="text" />

      <label>Type:</label>
      <select formControlName="type">
        <option value="text">Text</option>
        <option value="radio">Radio</option>
        <option value="checkbox">Checkbox</option>
      </select>

      <div *ngIf="q.get('type')?.value !== 'text'">
        <label>Options (comma separated):</label>
        <input (input)="updateOptions(i, $any($event.target).value)" />
      </div>

      <button type="button" (click)="removeQuestion(i)">Remove</button>
    </div>
  </div>

  <button type="button" (click)="addQuestion()">Add Question</button>
  <button type="submit">Save Questionnaire</button>
</form>
